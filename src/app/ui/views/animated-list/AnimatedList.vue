<template>
  <section class="animated-list">
    <h2 v-if="$slots['title']" class="animated-list__title">
      <slot name="title" />
    </h2>
    <transition-group appear tag="ul" name="appear-list-item" class="animated-list__table" @after-enter="endEnterEvent">
      <li
        v-for="(row, index) in rows"
        :key="complex ? `${row.id}-${index}` : row.id"
        :style="{
          transitionDelay: `${index * 0.1}s`,
        }"
        class="animated-list__row"
      >
        <slot :row="row" name="rows" />
      </li>
    </transition-group>
    <li v-if="$slots['error']" class="animated-list__error">
      <slot name="error" />
    </li>
  </section>
</template>
<script setup>
defineProps({
  rows: {
    type: Array,
    default: () => [],
    required: true,
  },

  complex: {
    type: Boolean,
    default: false,
  },
});

const endEnterEvent = async (e) => e.style.removeProperty("transition-delay");
</script>
<style lang="scss" src="./AnimatedList.scss" />
